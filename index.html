<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study with Glee - Pomodoro Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .app-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 90%;
            min-height: 600px;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 1rem;
        }

        .glee-character {
            width: 80px;
            height: 80px;
            background: #f0c674;
            border: 3px solid #333;
            border-radius: 10px;
            margin: 0 auto 1rem;
            position: relative;
            display: inline-block;
        }

        .glee-character::before {
            content: "ðŸ¤–";
            font-size: 2rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .timer-display {
            font-size: 4rem;
            font-weight: bold;
            color: #333;
            margin: 2rem 0;
            font-family: 'Courier New', monospace;
        }

        .work-session {
            color: #27ae60;
        }

        .break-session {
            color: #e74c3c;
        }

        .pomodoro-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .pomodoro-btn {
            background: linear-gradient(45deg, #b565a7, #9b4d96);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pomodoro-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(181, 101, 167, 0.3);
        }

        .todo-section {
            margin: 2rem 0;
            text-align: left;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .todo-input {
            width: 70%;
            padding: 0.75rem;
            border: 2px solid #b565a7;
            border-radius: 10px;
            font-size: 1rem;
            margin-right: 1rem;
        }

        .add-task-btn {
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-size: 1rem;
        }

        .todo-list {
            list-style: none;
            margin-top: 1rem;
        }

        .todo-item {
            background: white;
            margin: 0.5rem 0;
            padding: 1rem;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .todo-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }

        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 0.25rem 0.5rem;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .story-content {
            text-align: left;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            max-height: 400px;
            overflow-y: auto;
            line-height: 1.6;
        }

        .choice-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 1rem 2rem;
            margin: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .choice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .control-btn {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 1rem 2rem;
            margin: 1rem;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .control-btn.stop {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .control-btn.stop:hover {
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .session-info {
            font-size: 1.2rem;
            margin: 1rem 0;
            color: #555;
        }

        .inventory {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: left;
        }

        .inventory h4 {
            margin-bottom: 0.5rem;
            color: #333;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .pulsing {
            animation: pulse 1s infinite;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <h1>Hello, User_17!</h1>
            <div class="glee-character"></div>
            <h2>Study with Glee</h2>
            <p>Choose your Pomodoro technique and get ready for an adventure during your breaks!</p>
            
            <div class="pomodoro-options">
                <button class="pomodoro-btn" onclick="selectPomodoro(25, 5)">25-5<br><small>25min work, 5min break</small></button>
                <button class="pomodoro-btn" onclick="selectPomodoro(40, 10)">40-10<br><small>40min work, 10min break</small></button>
                <button class="pomodoro-btn" onclick="selectPomodoro(60, 20)">1h-20<br><small>1hr work, 20min break</small></button>
            </div>
        </div>

        <!-- Todo Setup Screen -->
        <div id="todo-screen" class="screen">
            <h2>Tasks</h2>
            <div class="glee-character"></div>
            <p>Add your study tasks before we begin!</p>
            
            <div class="todo-section">
                <input type="text" id="todo-input" class="todo-input" placeholder="Add a task (e.g., Pre-Calc worksheet)">
                <button class="add-task-btn" onclick="addTask()">+</button>
                <ul id="todo-list" class="todo-list"></ul>
            </div>
            
            <button class="control-btn" onclick="startPomodoro()">Start Study Session</button>
        </div>

        <!-- Timer Screen -->
        <div id="timer-screen" class="screen">
            <div class="session-info" id="session-info">Work Session</div>
            <div class="timer-display" id="timer-display">25:00</div>
            <div class="glee-character pulsing"></div>
            
            <div class="todo-section">
                <h3>Current Tasks:</h3>
                <ul id="active-todo-list" class="todo-list"></ul>
            </div>
            
            <button class="control-btn stop" onclick="stopPomodoro()">Stop Session</button>
        </div>

        <!-- Adventure Game Screen -->
        <div id="adventure-screen" class="screen">
            <h2>Break Time Adventure!</h2>
            <div class="glee-character"></div>
            <p><strong>Glee says:</strong> "Time for an adventure while you rest your mind!"</p>
            
            <div class="story-content" id="story-content">
                <!-- Story content will be loaded here -->
            </div>
            
            <div class="inventory" id="inventory" style="display: none;">
                <h4>Inventory:</h4>
                <ul id="inventory-list"></ul>
            </div>
            
            <div id="choices-container">
                <!-- Choice buttons will be loaded here -->
            </div>
            
            <div style="margin-top: 2rem;">
                <button class="control-btn" onclick="skipBreak()">Skip Break & Continue Studying</button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let currentSession = 'work';
        let timeRemaining = 0;
        let timerInterval = null;
        let workDuration = 25;
        let breakDuration = 5;
        let todos = [];
        let gameState = {
            currentStory: 'A',
            inventory: [],
            visited: []
        };

        // Story data
        const storyData = {
            'A': {
                title: 'Awakening',
                text: `You wake up in a green forest, with glowing fauna and debris scattered around. Your pod is shattered. By what, you do not know. You try to speak, but nothing comes out. It seems that such a long period of stasis has rendered you temporarily unable to speak.

You look around, there seems to be nothing around except for scraps. You try to recall your name, but it comes up empty. You forgot how old you were when you entered the pods.

The air is thick with the scent of sickly Bradford pear blossoms and the saccharine scent of honeysuckle. English ivy covered the trees. The ground is brown and murky, cracked in places.

You see something scurrying across the ground - striking blue eyes stare into yours before quickly disappearing. It had 4 limbs and nothing else. You see a highway and a newspaper dated 2080.`,
                choices: [
                    { text: 'Pick up the newspaper', next: 'A1' },
                    { text: 'Check your pod for oddities', next: 'B1' }
                ]
            },
            'A1': {
                title: 'The Newspaper',
                text: `The newspaper is old and ragged, with large holes looking as if chewed by rats. On it, you can barely make out the words:

"ChatGPT-X: THE FUTURE OF LABOR? With the new ChatGPT version, perhaps we'll finally reach the future Woodward has been preaching about."

Everything else is crossed out, leaving only one question at the bottom in messy handwriting: "WH[]T A[]OUT US?"`,
                choices: [
                    { text: 'Go look in the pod for any oddities', next: 'B1' }
                ]
            },
            'B1': {
                title: 'The Pod Investigation',
                text: `You check the pod. It's nothing too special - a transparent pod, coffin-like in shape, split in half vertically. There are no glass pieces on the ground, with trees surrounding the pod as if guarding a tomb. The grass was a bluish green, a squeamish green that made you cringe.

You looked around carefully. No shards, nothing shining, no note telling you of your origins. You curse at the sky - why didn't anyone give you anything?

Wait. What's that? A gray, rectangular prism. You pick it up, brushing off the dust. It was oddly similar to the barcode scanners back home. Perhaps a futuristic version of a scanner.`,
                choices: [
                    { text: 'Follow the road', next: 'C1' },
                    { text: 'Analyze the grass', next: 'B2' }
                ],
                addToInventory: ['Scanner']
            },
            'B2': {
                title: 'Strange Grass',
                text: `You kneel down, face only inches above the grass. Unlike normal grass, this type doesn't bend or flex. It's... crunchy? This is weird â€“ too weird, yet also fascinating.

On the ground, you catch a glimpse of a piece of paper. Picking it up, it reads: "FACTORY TERMINATION NOTICE. REPORT FOR STIPEND"`,
                choices: [
                    { text: 'Follow the road', next: 'C1' },
                    { text: 'Pick a sample of the grass for evaluation', next: 'C1', addToInventory: ['Grass Sample'] }
                ]
            },
            'C1': {
                title: 'Following the Tracks',
                text: `That animal was incredibly strange. You've decided to follow it, albeit against your better judgement. Slowly following the tracks, you walk ahead, dirt cracking under your feet. Chills run down your spine.

You know that when you've decided to set on a path, you can't walk away. But it is getting tedious. Look! There's a pond there. Glittering under the sunlight like sparkling diamonds, faint white lilypads floating softly on the surface. It's still, stagnant, perfect for a rest.`,
                choices: [
                    { text: 'Rest near the pond', next: 'C2' },
                    { text: 'Continue walking down the road', next: 'D1' }
                ]
            },
            'C2': {
                title: 'The Pond',
                text: `The pond looks perfect. Soft marshes are so restful. You lie down, feeling the exhaustion from your journey.`,
                choices: [
                    { text: 'Rest peacefully', next: 'C3' },
                    { text: 'Stay alert and continue on', next: 'D1' }
                ]
            },
            'C3': {
                title: 'GAME OVER',
                text: `Ahhh... Wait... No... AGHAWAGHHGH! What is that thing! Its hands are grabbing yours, dragging you into the water. You try to struggle but it only tightens its grip.

"Gaoed niuaght" The creature mouths. Blue eyes staring into yours. "Laiettlao news, thiais isas foris oaur brauthern yaou kailled"

YOU DIE`,
                choices: [
                    { text: 'Start over from the beginning', next: 'A' }
                ],
                gameOver: true
            },
            'D1': {
                title: 'The Metro Station',
                text: `Walking on the road, the sprawling green is slowly replaced by mundane gray. This gray wasn't natural - concrete gray, stacked together in a wall. A tunnel lay ahead with odd colorful markings. Graffiti covered the tunnel.

It took a while for you to realize, but this seemed oddly like a metro station.`,
                choices: [
                    { text: 'Stop and stare at the markings', next: 'D2' },
                    { text: 'Walk into the metro station', next: 'E1' }
                ]
            },
            'D2': {
                title: 'The Graffiti',
                text: `You decided to take a look at the graffiti. Flecks of paint were missing from the walls. In a waterfall of green, blue, and red, you see:

"NO MORE CLANKERS."
"WE WERE NEVER OBSOLETE"
"HUMANS OVER BOTS!"
"FOR THE SKILLETS!"
"THE ELITES HAVE GOT TO GO!"
"THE NEW COLLARS EAT CAVIAR WHILE WE EAT LIZARDS!"

On the ground, you see the glint of something gold.`,
                choices: [
                    { text: 'Pick it up', next: 'D3' },
                    { text: 'Go into the metro station', next: 'E1' }
                ]
            },
            'D3': {
                title: 'The Golden Card',
                text: `You pick up the golden sparkle. It's rectangularly shaped, slightly glinting under the sun. A barcode was visible. You pull out the scanner. The electronic reader hummed as you swung it over the card.

"500 CREDITS FOR A MONTHLY STIPEND. VALID UNTIL REVOKED" The device read out loud.

Weird. But as you were deep in thought, the tint of blue eyes glinted under the sunlight, staring hungrily at the device in your hands. Yet you notice nothing.`,
                choices: [
                    { text: 'Continue to the metro station', next: 'E1' }
                ],
                addToInventory: ['Credit Card (500 Credits)']
            },
            'E1': {
                title: 'Deep in the Metro',
                text: `You've been wandering in the metro station for weeks, scavenging above for food. There was no chatter, no talking, no roaring trains. You felt a pair of eyes on you constantly, but every time you looked, all there was smudged graffiti and checkered tile.

The scanner had been humming every time you ventured north, and your goosebumps would rise higher.`,
                choices: [
                    { text: 'Leave the metro', next: 'F1' },
                    { text: 'Venture north (Dangerous)', next: 'E2' }
                ]
            }
        };

        function selectPomodoro(work, breakTime) {
            workDuration = work;
            breakDuration = breakTime;
            showScreen('todo-screen');
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function addTask() {
            const input = document.getElementById('todo-input');
            const task = input.value.trim();
            if (task) {
                todos.push({ text: task, completed: false });
                input.value = '';
                updateTodoDisplay();
            }
        }

        function updateTodoDisplay() {
            const todoList = document.getElementById('todo-list');
            const activeTodoList = document.getElementById('active-todo-list');
            
            [todoList, activeTodoList].forEach(list => {
                if (list) {
                    list.innerHTML = '';
                    todos.forEach((todo, index) => {
                        const li = document.createElement('li');
                        li.className = `todo-item ${todo.completed ? 'completed' : ''}`;
                        li.innerHTML = `
                            <span onclick="toggleTask(${index})" style="cursor: pointer;">
                                ${todo.completed ? 'âœ“' : 'â—‹'} ${todo.text}
                            </span>
                            <button class="delete-btn" onclick="deleteTask(${index})">Delete</button>
                        `;
                        list.appendChild(li);
                    });
                }
            });
        }

        function toggleTask(index) {
            todos[index].completed = !todos[index].completed;
            updateTodoDisplay();
        }

        function deleteTask(index) {
            todos.splice(index, 1);
            updateTodoDisplay();
        }

        function startPomodoro() {
            currentSession = 'work';
            timeRemaining = workDuration * 60;
            showScreen('timer-screen');
            updateTodoDisplay();
            startTimer();
        }

        function startTimer() {
            updateTimerDisplay();
            updateSessionInfo();
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    if (currentSession === 'work') {
                        startBreak();
                    } else {
                        askContinueStudying();
                    }
                }
            }, 1000);
        }

        function startBreak() {
            currentSession = 'break';
            timeRemaining = breakDuration * 60;
            showScreen('adventure-screen');
            loadStory(gameState.currentStory);
            startTimer();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            const timerElement = document.getElementById('timer-display');
            if (timerElement) {
                timerElement.textContent = display;
                timerElement.className = `timer-display ${currentSession}-session`;
            }
        }

        function updateSessionInfo() {
            const sessionInfo = document.getElementById('session-info');
            if (sessionInfo) {
                sessionInfo.textContent = currentSession === 'work' ? 'Work Session' : `Break Time (${Math.ceil(timeRemaining / 60)} min)`;
            }
        }

        function stopPomodoro() {
            clearInterval(timerInterval);
            showScreen('welcome-screen');
        }

        function skipBreak() {
            clearInterval(timerInterval);
            askContinueStudying();
        }

        function askContinueStudying() {
            if (confirm("Ready for another study session?")) {
                startPomodoro();
            } else {
                showScreen('welcome-screen');
            }
        }

        function loadStory(storyId) {
            const story = storyData[storyId];
            if (!story) return;

            gameState.visited.push(storyId);
            
            document.getElementById('story-content').innerHTML = `
                <h3>${story.title}</h3>
                <p>${story.text.replace(/\n/g, '<br><br>')}</p>
            `;

            // Add to inventory if specified
            if (story.addToInventory) {
                story.addToInventory.forEach(item => {
                    if (!gameState.inventory.includes(item)) {
                        gameState.inventory.push(item);
                    }
                });
                updateInventoryDisplay();
            }

            // Load choices
            const choicesContainer = document.getElementById('choices-container');
            choicesContainer.innerHTML = '';
            
            story.choices.forEach(choice => {
                const button = document.createElement('button');
                button.className = 'choice-btn';
                button.textContent = choice.text;
                button.onclick = () => makeChoice(choice);
                choicesContainer.appendChild(button);
            });

            if (story.gameOver) {
                setTimeout(() => {
                    alert("Game Over! You can restart the adventure during your next break.");
                    gameState.currentStory = 'A';
                    gameState.inventory = [];
                    gameState.visited = [];
                }, 1000);
            }
        }

        function makeChoice(choice) {
            if (choice.addToInventory) {
                choice.addToInventory.forEach(item => {
                    if (!gameState.inventory.includes(item)) {
                        gameState.inventory.push(item);
                    }
                });
            }
            
            gameState.currentStory = choice.next;
            loadStory(choice.next);
        }

        function updateInventoryDisplay() {
            const inventoryDiv = document.getElementById('inventory');
            const inventoryList = document.getElementById('inventory-list');
            
            if (gameState.inventory.length > 0) {
                inventoryDiv.style.display = 'block';
                inventoryList.innerHTML = '';
                gameState.inventory.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    inventoryList.appendChild(li);
                });
            } else {
                inventoryDiv.style.display = 'none';
            }
        }

        // Allow adding tasks with Enter key
        document.getElementById('todo-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addTask();
            }
        });

        // Initialize
        updateTodoDisplay();
    </script>
</body>
</html>
